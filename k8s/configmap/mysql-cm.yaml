apiVersion: v1
data:
  init.sql: "CREATE DATABASE IF NOT EXISTS quizdb CHARACTER SET utf8mb4 COLLATE utf8mb4_polish_ci;\nCREATE DATABASE IF NOT EXISTS keycloak CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\nCREATE USER IF NOT EXISTS 'keycloak'@'%' IDENTIFIED BY 'keycloak';\nCREATE USER IF NOT EXISTS 'quizuser'@'%' IDENTIFIED BY 'quizpassword';\n\nGRANT ALL PRIVILEGES ON keycloak.* TO 'keycloak'@'%';\nGRANT ALL PRIVILEGES ON quizdb.* TO 'root'@'%';\nGRANT ALL PRIVILEGES ON quizdb.* TO 'quizuser'@'%';\nFLUSH PRIVILEGES;\n\nUSE quizdb;\n\n\n\nCREATE TABLE IF NOT EXISTS categories (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    name VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_polish_ci NOT NULL\n) CHARACTER SET utf8mb4 COLLATE utf8mb4_polish_ci;\n\nCREATE TABLE IF NOT EXISTS quizzes (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    title VARCHAR(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_polish_ci NOT NULL,\n    category_id INT,\n    author_id VARCHAR(255),\n    author_username VARCHAR(255),\n    FOREIGN KEY (category_id) REFERENCES categories(id)\n) CHARACTER SET utf8mb4 COLLATE utf8mb4_polish_ci;\n\nCREATE TABLE IF NOT EXISTS questions (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    question_text TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_polish_ci,\n    quiz_id INT,\n    FOREIGN KEY (quiz_id) REFERENCES quizzes(id)\n) CHARACTER SET utf8mb4 COLLATE utf8mb4_polish_ci;\n\nCREATE TABLE IF NOT EXISTS options (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    option_text TEXT CHARACTER SET utf8mb4 COLLATE utf8mb4_polish_ci,\n    is_correct BOOLEAN DEFAULT FALSE,\n    question_id INT,\n    FOREIGN KEY (question_id) REFERENCES questions(id)\n) CHARACTER SET utf8mb4 COLLATE utf8mb4_polish_ci;\n\n\nINSERT INTO categories (name) VALUES ('Horoscope'), ('Quiz'), ('Poll');\n\nINSERT INTO quizzes (title, category_id) VALUES ('Quiz o zwierzetach', 2);\n\nINSERT INTO questions (question_text, quiz_id) VALUES \n  ('Jakie zwierze miauczy?', 1),\n  ('Ktore zwierze ma trabe?', 1);\n\nINSERT INTO options (option_text, question_id, is_correct) VALUES \n  ('Kot', 1, TRUE), \n  ('Pies', 1, FALSE), \n  ('Krowa', 1, FALSE),\n  ('Slon', 2, TRUE), \n  ('Kon', 2, FALSE), \n  ('Swinia', 2, FALSE);\n\n-- Nowy quiz\nINSERT INTO quizzes (title, category_id) VALUES ('Docker i konteneryzacja', 2); -- quiz_id = 2\n\n-- Pytania\nINSERT INTO questions (question_text, quiz_id) VALUES\n  ('Czym jest Docker?', 2),\n  ('Co to jest obraz (image) Dockera?', 2),\n  ('Ktora komenda tworzy kontener?', 2),\n  ('Do czego sluzy plik Dockerfile?', 2),\n  ('Jak uruchomic kontener w tle?', 2),\n  ('Co robi `docker-compose up`?', 2),\n  ('Jak sprawdzic aktywne kontenery?', 2),\n  ('Co to jest wolumen (volume)?', 2);\n\n-- Opcje\nINSERT INTO options (option_text, question_id, is_correct) VALUES\n  ('Platforma do konteneryzacji aplikacji', 3, TRUE),\n  ('System operacyjny', 3, FALSE),\n  ('Edytor tekstu', 3, FALSE),\n\n  ('Zrzut stanu kontenera', 4, FALSE),\n  ('Szablon do tworzenia kontenerow', 4, TRUE),\n  ('Obiekt w bazie danych', 4, FALSE),\n\n  ('docker build', 5, FALSE),\n  ('docker run', 5, TRUE),\n  ('docker start', 5, FALSE),\n\n  ('Do opisu sieci', 6, FALSE),\n  ('Do konfigurowania kontenerow w YAML', 6, FALSE),\n  ('Do definiowania jak zbudowac obraz', 6, TRUE),\n\n  ('docker run -d', 7, TRUE),\n  ('docker start -b', 7, FALSE),\n  ('docker boot', 7, FALSE),\n\n  ('Uruchamia kontenery na podstawie pliku docker-compose.yml', 8, TRUE),\n  ('Tworzy nowy obraz', 8, FALSE),\n  ('Restartuje Dockera', 8, FALSE),\n\n  ('docker list', 9, FALSE),\n  ('docker ps', 9, TRUE),\n  ('docker logs', 9, FALSE),\n\n  ('Trwaly obszar danych wspoldzielony z kontenerem', 10, TRUE),\n  ('Typ obrazu Dockera', 10, FALSE),\n  ('Proces dzialajacy w tle', 10, FALSE);\n\n\nINSERT INTO quizzes (title, category_id) VALUES ('Twoj horoskop dzienny', 1); -- quiz_id = 3\n\nINSERT INTO questions (question_text, quiz_id) VALUES\n  ('Baran: Dzis energia Cie nie opusci. Czas na dzialanie!', 3),\n  ('Byk: Stabilnosc jest dzis Twoim sprzymierze≈Ñcem.', 3),\n  ('Bliznieta: Komunikacja bedzie kluczowa.', 3),\n  ('Rak: Postaw dzis na bliskich i emocje.', 3),\n  ('Lew: Czas blyszczec! Pokaz swoja sile.', 3),\n  ('Panna: Uporzadkuj przestrzen wokol siebie.', 3),\n  ('Waga: Szukaj balansu w relacjach.', 3),\n  ('Skorpion: Tajemnice dzis wychodza na jaw.', 3),\n  ('Strzelec: Czas na przygode i odkrywanie.', 3),\n  ('Koziorozec: Ambicja dzis Ci sprzyja.', 3),\n  ('Wodnik: Zaskocz wszystkich kreatywnoscia.', 3),\n  ('Ryby: Intuicja poprowadzi Cie wlasciwie.', 3);\n\nINSERT INTO options (option_text, question_id, is_correct) VALUES\n  ('Zobacz swoja wrozbe!', 11, TRUE),\n  ('Zobacz swoja wrozbe!', 12, TRUE),\n  ('Zobacz swoja wrozbe!', 13, TRUE),\n  ('Zobacz swoja wrozbe!', 14, TRUE),\n  ('Zobacz swoja wrozbe!', 15, TRUE),\n  ('Zobacz swoja wrozbe!', 16, TRUE),\n  ('Zobacz swoja wrozbe!', 17, TRUE),\n  ('Zobacz swoja wrozbe!', 18, TRUE),\n  ('Zobacz swoja wrozbe!', 19, TRUE),\n  ('Zobacz swoja wrozbe!', 20, TRUE),\n  ('Zobacz swoja wrozbe!', 21, TRUE),\n  ('Zobacz swoja wrozbe!', 22, TRUE);\n\n\n\nINSERT INTO quizzes (title, category_id) VALUES ('Co bys wolal?', 3); -- quiz_id = 4\n\nINSERT INTO questions (question_text, quiz_id) VALUES\n  ('Co bys wolal na uczelni?', 4),\n  ('W ktorej sytuacji wolisz byc?', 4),\n  ('Jak spedzic idealny dzien?', 4),\n  ('Jaka stosujesz rutyne?', 4);\n\nINSERT INTO options (option_text, question_id) VALUES\n  ('Zdalne zajecia caly semestr', 23),\n  ('Fizycznie, ale tylko 2 dni w tygodniu', 23),\n\n  ('Nie miec projektow, ale same egzaminy', 24),\n  ('Nie miec egzaminow, ale duzo projektow', 24),\n\n  ('Spac do 12 i grac w gry', 25),\n  ('Wycieczka ze znajomymi i piwo na plazy', 25),\n\n  ('Wstawac rano, isc spac wczesnie (poranny ptaszek) ', 26),\n  ('Spac do pozna, zostawac po nocy (nocny marek)', 26);\n\nALTER TABLE quizzes\nADD COLUMN created_by VARCHAR(255);  \n"
kind: ConfigMap
metadata:
  annotations:
    use-subpath: "true"
  labels:
    io.kompose.service: mysql
  name: mysql-cm
  namespace: nietylkoquizy
